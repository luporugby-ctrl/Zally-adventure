<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zally's Prompting Adventure - Mondo 1</title>
    <!-- Import Tailwind CSS (ora sarà permesso da Code.gs) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Import Google Font 'Press Start 2P' (ora sarà permesso da Code.gs) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: #5c94fc; /* Colore cielo */
            overflow: hidden; 
        }
        .game-world {
            width: 2000px; 
            height: 100vh;
            position: relative;
        }
        .ground-block {
            background-color: #e27525; /* Marrone */
            border: 4px solid black;
            width: 64px;
            height: 64px;
        }

        /* --- IMMAGINE DI ZALLY INCLUSA DIRETTAMENTE --- */
        #zally {
            width: 64px; 
            height: 64px;
            position: absolute;
            bottom: 64px; 
            left: 80px;
            z-index: 10;
            transition: left 0.1s linear, transform 0.2s ease-out;
            /* L'immagine PNG è "incollata" qui sotto come stringa Base64 */
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAyRJREFUeJztm01uwjAQRmN6gESJk2CjQEuCpUAPgZ6EnoQeA0cOkXgEcgR6AnQEOgQyQ6qEgiU5sWzHxJLkPSSTlPwnn48/sSQyMif/8+IYgP9PQBGAEcARwBHAEYARwBGAEcARwBGAEcARwBGAEcARwBGAEcARwBGAEcARwBGAEcARwBGAEWDmAIyMa5rGGI/H2/S2y8vL21we75TRNP1vEnhARESISL+I6BWR7zVNa91sNrtoNBrtL9kRkVEiPmmak8mEw+Fw9wJiz3w+PyMiC2NcPzI+B0BmMpnsG4AXAD4AcADgTACeAlgGcNf1k5tGo5FlWa+qBw8AghBCeClEOK9CWpYl4mg0GrqG+vj4eA4AExGteFEUfSLiOwA/AHwE8B3Aoih6KpfLBYBHdRwWAMiylouIiEiIiLcBfASwLIt2YyYimciyLKIo+rL3/g+MiIjYAPDnRL+qVgSApmniGI/HBxHxhYj/vH9/T0TE433/DwA+RLSva1wXAMCMYRiIyFsiXpRluVgsFm8AYBGxB4B/IvqmaR49Pj7+MQA2qtaBSA/dAhBR0v/K2g0AsixL67rur9vY2NjY2Njo9no9AGzbto/T09MbmUxeA/D1Gv+/Ly8vN5vN1iLGGI/Hk/P5/AsAFgA8RPS01nUH0jFGIpI/AHiIaGOM/c61LMs2iqJflmV1TdP8bABsiOg7kWdZ1o8dHx+fAbCva11LkiQi2ohooij6vM/n0/e/3mAw6NptNptHAF4hItcR0dUQwjHcde1+sNhstp/P50vA+0XkXkQ0GIbxLQBTAFwFsFgs3o2NjVUR0fdgMMix2+1+vVKpXKdPn74R0bquKwB+AagFMMbYt2378Nra2tpvAcg/wuFwnwDkXdcVSJJkPQCfARzXdd+IiH0iEiPa6LquYxgGjuM4AB/SNJ90XfeIiIcjIyPjBwA+iujpdDq/URQ9EtF2HMchjDHeBuCrzWY7M5/PX/cR0fQ8z/u+PyMi+0Uke573S61KqOrD8/yXiD6J6O3t7S/y+fxdAPBIRES0QkT7vu+XiEjf9/2fAEYARwBHAEcARgBHAEcARwBHAEcARgBHAEcARgBHAEcARgBHAEcARgBHAEcARgBHAEcARgDH8X+J6wCxvL23GAAAAABJRU5ErkJggg==');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        @keyframes zally-jump {
            0%   { transform: translateY(0); }
            50%  { transform: translateY(-50px); }
            100% { transform: translateY(0); }
        }
        .jumping {
            animation: zally-jump 0.4s ease-out;
        }

        .trampoline {
            width: 96px;
            height: 48px;
            background-color: #2dbd2d; /* Verde */
            border: 4px solid black;
            position: absolute;
            bottom: 64px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
            text-align: center;
            line-height: 1.2;
            font-size: 10px;
            transition: transform 0.1s ease;
        }
        .trampoline:hover {
            transform: scale(1.05);
        }

        .cloud {
            width: 128px;
            height: 64px;
            background-color: white;
            border: 4px solid black;
            border-radius: 20px;
            position: absolute;
            top: 100px;
        }

        .modal-pixel {
            font-family: 'Inter', sans-serif; 
            border: 4px solid black;
            box-shadow: 8px 8px 0px black;
        }
        .modal-header-pixel {
             font-family: 'Press Start 2P', cursive;
             border-bottom: 4px solid black;
             background-color: #f87d00;
             color: white;
             text-shadow: 2px 2px 0px black;
        }
        .modal-button-pixel {
            font-family: 'Press Start 2P', cursive;
            border: 4px solid black;
            box-shadow: 4px 4px 0px black;
            transition: all 0.1s ease;
        }
        .modal-button-pixel:hover {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px black;
        }
    </style>
</head>
<body class="m-0 p-0">

    <div class="fixed top-0 left-0 w-full bg-black text-white p-4 z-50 text-center text-sm md:text-base">
        Zally's Prompting Adventure - MONDO 1: Le Basi. Usa i tasti ⬅️ e ➡️ per muoverti!
    </div>

    <div class="game-world" id="game-world">
        
        <div class="cloud" style="left: 200px; top: 150px;"></div>
        <div class="cloud" style="left: 700px; top: 100px; width: 160px;"></div>
        <div class="cloud" style="left: 1200px; top: 200px;"></div>
        <div class="cloud" style="left: 1700px; top: 120px; width: 160px;"></div>

        <div id="zally" title="Questo è Zally!"></div>

        <div class="trampoline challenge-trigger" data-challenge-id="1" style="left: 300px;">
            Challenge 1: IL TASK
        </div>
        <div class="trampoline challenge-trigger" data-challenge-id="2" style="left: 600px;">
            Challenge 2: IL CONTESTO
        </div>
        <div class="trampoline challenge-trigger" data-challenge-id="3" style="left: 900px;">
            Challenge 3: LA PERSONA
        </div>
        <div class="trampoline challenge-trigger" data-challenge-id="4" style="left: 1200px;">
            Challenge 4: IL FORMATO
        </div>
        <div class="trampoline challenge-trigger" data-challenge-id="5" style="left: 1600px; background-color: #d946ef; width: 128px; height: 64px;">
            BOSS CHALLENGE FINALE!
        </div>

        <!-- Il Terreno -->
        <div class="absolute bottom-0 left-0 flex flex-row z-0">
            <script>
                // Genera 32 blocchi di terreno
                for (let i = 0; i < 32; i++) {
                    document.write('<div class="ground-block"></div>');
                }
            </script>
        </div>
    </div>

    <!-- Modal per le Challenge (Nascosto) -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-70 z-40 hidden"></div>
    <div id="challenge-modal" class="fixed top-1/2 left-1/2 w-11/12 max-w-2xl -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg z-50 hidden modal-pixel">
        <div id="modal-title" class="p-4 text-xl modal-header-pixel"></div>
        <div class="p-6 text-gray-800 space-y-4">
            <div id="modal-concept" class="text-sm"></div>
            <div class="bg-red-100 border-2 border-red-500 p-3 rounded-lg">
                <h3 class="font-bold text-red-700">Prompt Debole (Zally Cade!):</h3>
                <p id="modal-bad-prompt" class="text-sm mt-1 font-mono"></p>
            </div>
            <div class="bg-green-100 border-2 border-green-600 p-3 rounded-lg">
                <h3 class="font-bold text-green-800">Prompt Forte (Super Salto!):</h3>
                <p id="modal-good-prompt" class="text-sm mt-1 font-mono"></p>
            </div>
            <div id="modal-takeaway" class="pt-4 text-sm font-bold"></div>
        </div>
        <div class="p-4 bg-gray-100 border-t-4 border-black flex justify-end">
            <button id="close-modal-btn" class="modal-button-pixel bg-blue-500 text-white px-6 py-2 rounded-lg">
                Chiudi
            </button>
        </div>
    </div>

    <script>
        const challenges = [
            { id: 1, title: "Challenge 1: Il TASK", concept: "Il primo super-potere è dire a Gemini COSA fare. Inizia sempre con un verbo d'azione forte. Non essere vago!", badPrompt: "Questa email di un fornitore...", goodPrompt: "'RIASSUMI' questa email di un fornitore in 3 punti chiave.", takeaway: "Inizia sempre con un TASK: Riassumi, Scrivi, Elenca, Analizza, Traduci, Confronta..." },
            { id: 2, title: "Challenge 2: Il CONTESTO", concept: "Gemini non sa cosa sai tu. Dagli il background! Più contesto = risposta più utile.", badPrompt: "Scrivi un'email a un fornitore che è in ritardo.", goodPrompt: "Scrivi un'email a un fornitore che è in ritardo. 'CONTESTO: Il PO è 12345, la data di consegna originale era il 25/10. È la seconda volta che succede.'", takeaway: "Includi sempre il CONTESTO: numeri, date, PO, e-mail precedenti, il tuo obiettivo finale." },
            { id: 3, title: "Challenge 3: La PERSONA", concept: "Di' a Gemini chi deve essere. Questo controlla il tono, lo stile e il livello di dettaglio della risposta.", badPrompt: "Scrivi l'email di prima.", goodPrompt: "'AGISCI COME un Operations Specialist di YF&K, professionale ma cordiale.' Scrivi l'email di prima.", takeaway: "Assegna una PERSONA: 'Agisci come...', 'Sei un analista dati...', 'Parla come un manager...'" },
            { id: 4, title: "Challenge 4: Il FORMATO", concept: "Non accontentarti di un muro di testo. Di' a Gemini COME vuoi la risposta.", badPrompt: "Analizza questi dati sui ticket.", goodPrompt: "Analizza questi dati sui ticket e 'CREA UNA TABELLA' con 3 colonne: 'Categoria Ticket', 'Numero di Ticket', 'Risoluzione Media'.", takeaway: "Definisci il FORMATO: 'Dammi un elenco puntato', 'Crea una tabella', 'Scrivi una bozza di email'." },
            { id: 5, title: "BOSS CHALLENGE: Il Super-Prompt!", concept: "Hai sbloccato tutti i poteri! Ora combiniamoli tutti per un prompt di livello 'Boss'. Questo è il P.T.C.F. (Persona, Task, Context, Format) in azione.", badPrompt: "Prepara un report sui fornitori.", goodPrompt: "'PERSONA:' Agisci come il mio assistente Ops. 'CONTESTO:' Devo aggiornare il mio Team Lead sui problemi dei fornitori A, B e C. 'TASK:' Analizza i problemi e identifica i 3 rischi più urgenti. 'FORMATO:' Scrivi una bozza di email per il mio lead, con i 3 rischi in un elenco puntato e suggerisci un'azione per ognuno.", takeaway: "MONDO 1 COMPLETATO! Hai imparato a combinare P.T.C.F. per prompt efficaci!" }
        ];

        const modalOverlay = document.getElementById('modal-overlay');
        const modal = document.getElementById('challenge-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const challengeTriggers = document.querySelectorAll('.challenge-trigger');
        const zally = document.getElementById('zally');
        const modalTitle = document.getElementById('modal-title');
        const modalConcept = document.getElementById('modal-concept');
        const modalBadPrompt = document.getElementById('modal-bad-prompt');
        const modalGoodPrompt = document.getElementById('modal-good-prompt');
        const modalTakeaway = document.getElementById('modal-takeaway');

        let isModalOpen = false;

        function openModal(challenge) {
            isModalOpen = true;
            modalTitle.textContent = challenge.title;
            modalConcept.textContent = challenge.concept;
            modalBadPrompt.textContent = challenge.badPrompt;
            modalGoodPrompt.textContent = challenge.goodPrompt;
            modalTakeaway.textContent = challenge.takeaway;
            modalOverlay.classList.remove('hidden');
            modal.classList.remove('hidden');
        }

        function closeModal() {
            isModalOpen = false;
            modalOverlay.classList.add('hidden');
            modal.classList.add('hidden');
        }

        challengeTriggers.forEach(trigger => {
            trigger.addEventListener('click', (event) => {
                event.stopPropagation();
                zally.classList.add('jumping');
                const challengeId = parseInt(trigger.dataset.challengeId);
                const challengeData = challenges.find(c => c.id === challengeId);
                if (challengeData) {
                    setTimeout(() => {
                        openModal(challengeData);
                        zally.classList.remove('jumping');
                    }, 400); 
                }
            });
        });

        closeModalBtn.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', closeModal);

        // --- Logica di Movimento ---
        const gameWorld = document.getElementById('game-world');
        let zallyPositionX = 80;
        const moveSpeed = 15;
        const worldWidth = 2000;
        let screenWidth = window.innerWidth;
        
        window.addEventListener('resize', () => { screenWidth = window.innerWidth; });

        document.addEventListener('keydown', (e) => {
            if (isModalOpen) return;

            if (e.key === 'ArrowRight') {
                zallyPositionX = Math.min(zallyPositionX + moveSpeed, worldWidth - zally.offsetWidth - 10);
                zally.style.transform = 'scaleX(1)'; // Guarda a destra
            } else if (e.key === 'ArrowLeft') {
                zallyPositionX = Math.max(zallyPositionX - moveSpeed, 0);
                zally.style.transform = 'scaleX(-1)'; // Guarda a sinistra (specchiato)
            }

            zally.style.left = zallyPositionX + 'px';

            // --- Logica Telecamera ---
            let cameraLookAhead = screenWidth / 3;
            let targetScrollLeft = zallyPositionX - cameraLookAhead;
            targetScrollLeft = Math.max(0, targetScrollLeft);
            targetScrollLeft = Math.min(targetScrollLeft, worldWidth - screenWidth);
            document.documentElement.scrollLeft = targetScrollLeft;
        });
    </script>
</body>
</html>

